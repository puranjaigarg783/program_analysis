foo.r <= foo.p
foo.y <= proj(ref,1,foo.p)
main.y <= proj(ref,1,main.p)
proj(ref,1,foo.p) <= foo.q
proj(ref,1,main.p) <= main.q
r <= main.p
ref(foo.x,foo.x) <= foo.y
ref(x,x) <= main.y
